kind: "CDN"
version: "1"
metadata:
    envTypes: [ "rde", "dev" ]
data:
  responseTransformations:
    rules:
      - name: "frame-security-policy-for-author-rde"
        when:
            reqProperty: domain
            equals: "author-p10961-e1322140.adobeaemcloud.com"
        actions:
          - type: set
            value:  frame-ancestors 'self' https://experience.adobe.com
            respHeader: Content-Security-Policy       
      - name: "set-samesite-none-for-login-token"
        when:
            respHeader: Set-Cookie
            matches: "login-token=.*"
        actions:
          - type: set
            respHeader: Set-Cookie
            value: { respHeader: Set-Cookie, transform: [ {op: 'replace', match: 'SameSite=(Lax|Strict|None)', replacement: 'SameSite=None'} ] } 